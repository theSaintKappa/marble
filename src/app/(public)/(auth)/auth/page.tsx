import { ThemeModeToggle } from "@/components/theme-mode-toggle";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Separator } from "@/components/ui/separator";
import type { Provider } from "@supabase/supabase-js";
import { ArrowLeft, Github, Twitter } from "lucide-react";
import Link from "next/link";
import OAuthButton from "./oauth-button";
import { EmailDialog } from "./email-dialog";

export type OAuthProvider = { name: string; provider: Provider; icon: JSX.Element };

const providers: OAuthProvider[] = [
    {
        name: "GitHub",
        provider: "github",
        icon: (
            <svg xmlns="http://www.w3.org/2000/svg" width="1.03em" height="1em" viewBox="0 0 256 250" className="h-6 w-6">
                <path
                    fill="currentColor"
                    d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46c6.397 1.185 8.746-2.777 8.746-6.158c0-3.052-.12-13.135-.174-23.83c-35.61 7.742-43.124-15.103-43.124-15.103c-5.823-14.795-14.213-18.73-14.213-18.73c-11.613-7.944.876-7.78.876-7.78c12.853.902 19.621 13.19 19.621 13.19c11.417 19.568 29.945 13.911 37.249 10.64c1.149-8.272 4.466-13.92 8.127-17.116c-28.431-3.236-58.318-14.212-58.318-63.258c0-13.975 5-25.394 13.188-34.358c-1.329-3.224-5.71-16.242 1.24-33.874c0 0 10.749-3.44 35.21 13.121c10.21-2.836 21.16-4.258 32.038-4.307c10.878.049 21.837 1.47 32.066 4.307c24.431-16.56 35.165-13.12 35.165-13.12c6.967 17.63 2.584 30.65 1.255 33.873c8.207 8.964 13.173 20.383 13.173 34.358c0 49.163-29.944 59.988-58.447 63.157c4.591 3.972 8.682 11.762 8.682 23.704c0 17.126-.148 30.91-.148 35.126c0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002C256 57.307 198.691 0 128.001 0m-80.06 182.34c-.282.636-1.283.827-2.194.39c-.929-.417-1.45-1.284-1.15-1.922c.276-.655 1.279-.838 2.205-.399c.93.418 1.46 1.293 1.139 1.931m6.296 5.618c-.61.566-1.804.303-2.614-.591c-.837-.892-.994-2.086-.375-2.66c.63-.566 1.787-.301 2.626.591c.838.903 1 2.088.363 2.66m4.32 7.188c-.785.545-2.067.034-2.86-1.104c-.784-1.138-.784-2.503.017-3.05c.795-.547 2.058-.055 2.861 1.075c.782 1.157.782 2.522-.019 3.08m7.304 8.325c-.701.774-2.196.566-3.29-.49c-1.119-1.032-1.43-2.496-.726-3.27c.71-.776 2.213-.558 3.315.49c1.11 1.03 1.45 2.505.701 3.27m9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033c-1.448-.439-2.395-1.613-2.103-2.626c.301-1.01 1.747-1.484 3.207-1.028c1.446.436 2.396 1.602 2.095 2.622m10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95c-1.53.034-2.769-.82-2.786-1.86c0-1.065 1.202-1.932 2.733-1.958c1.522-.03 2.768.818 2.768 1.868m10.555-.405c.182 1.03-.875 2.088-2.387 2.37c-1.485.271-2.861-.365-3.05-1.386c-.184-1.056.893-2.114 2.376-2.387c1.514-.263 2.868.356 3.061 1.403"
                />
            </svg>
        ),
    },
    {
        name: "Google",
        provider: "google",
        icon: (
            <svg xmlns="http://www.w3.org/2000/svg" width="0.98em" height="1em" viewBox="0 0 256 262" className="h-6 w-6">
                <path fill="#4285F4" d="M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622l38.755 30.023l2.685.268c24.659-22.774 38.875-56.282 38.875-96.027" />
                <path fill="#34A853" d="M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055c-34.523 0-63.824-22.773-74.269-54.25l-1.531.13l-40.298 31.187l-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1" />
                <path fill="#FBBC05" d="M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82c0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602z" />
                <path fill="#EB4335" d="M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0C79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251" />
            </svg>
        ),
    },
    {
        name: "Discord",
        provider: "discord",
        icon: (
            <svg xmlns="http://www.w3.org/2000/svg" width="1.29em" height="1em" viewBox="0 0 256 199" className="h-6 w-6">
                <path
                    fill="#5865F2"
                    d="M216.856 16.597A208.502 208.502 0 0 0 164.042 0c-2.275 4.113-4.933 9.645-6.766 14.046c-19.692-2.961-39.203-2.961-58.533 0c-1.832-4.4-4.55-9.933-6.846-14.046a207.809 207.809 0 0 0-52.855 16.638C5.618 67.147-3.443 116.4 1.087 164.956c22.169 16.555 43.653 26.612 64.775 33.193A161.094 161.094 0 0 0 79.735 175.3a136.413 136.413 0 0 1-21.846-10.632a108.636 108.636 0 0 0 5.356-4.237c42.122 19.702 87.89 19.702 129.51 0a131.66 131.66 0 0 0 5.355 4.237a136.07 136.07 0 0 1-21.886 10.653c4.006 8.02 8.638 15.67 13.873 22.848c21.142-6.58 42.646-16.637 64.815-33.213c5.316-56.288-9.08-105.09-38.056-148.36M85.474 135.095c-12.645 0-23.015-11.805-23.015-26.18s10.149-26.2 23.015-26.2c12.867 0 23.236 11.804 23.015 26.2c.02 14.375-10.148 26.18-23.015 26.18m85.051 0c-12.645 0-23.014-11.805-23.014-26.18s10.148-26.2 23.014-26.2c12.867 0 23.236 11.804 23.015 26.2c0 14.375-10.148 26.18-23.015 26.18"
                />
            </svg>
        ),
    },
    {
        name: "Twitter",
        provider: "twitter",
        icon: (
            <svg xmlns="http://www.w3.org/2000/svg" width="1.23em" height="1em" viewBox="0 0 256 209" className="h-6 w-6">
                <path
                    fill="#1d9bf0"
                    d="M256 25.45a105.04 105.04 0 0 1-30.166 8.27c10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52c0 4.117.465 8.125 1.36 11.97c-43.65-2.191-82.35-23.1-108.255-54.876c-4.52 7.757-7.11 16.78-7.11 26.404c0 18.222 9.273 34.297 23.365 43.716a52.312 52.312 0 0 1-23.79-6.57c-.003.22-.003.44-.003.661c0 25.447 18.104 46.675 42.13 51.5a52.592 52.592 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475c-17.975 14.086-40.622 22.483-65.228 22.483c-4.24 0-8.42-.249-12.529-.734c23.243 14.902 50.85 23.597 80.51 23.597c96.607 0 149.434-80.031 149.434-149.435c0-2.278-.05-4.543-.152-6.795A106.748 106.748 0 0 0 256 25.45"
                />
            </svg>
        ),
    },
];

export default function Page() {
    return (
        <main className="h-supports-dvh flex justify-center items-center p-8">
            <div className="w-full max-w-2xl relative group">
                <div className="absolute inset-0 bg-gradient-to-tr from-purple-500 via-blue-600 to-pink-500 blur opacity-50 group-hover:opacity-75 group-hover:-inset-0.5 duration-200" />
                <Card className="p-8 flex flex-col items-center relative">
                    <CardHeader className="items-center gap-1">
                        <CardTitle className="flex items-center gap-2">
                            <svg className="h-10 w-10" width="128" height="128" viewBox="0 0 128 128" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                <path d="M63.999 0C28.6311 0 0 28.786 0 64C0 99.214 28.6311 128 63.999 128C99.3668 128 127.998 99.214 127.998 64C128.279 28.786 99.3668 0 63.999 0ZM59.5078 36.3319C56.1395 37.7293 53.3325 38.2882 50.8062 38.8472C50.2448 38.8472 49.4027 39.1266 48.8413 39.1266C47.9992 39.4061 47.4378 39.4061 46.5958 39.6856C44.6309 39.9651 42.3853 40.524 40.1397 41.3624C26.6662 46.6725 17.9646 59.8079 13.1928 81.607C11.2279 76.0175 10.3858 70.4279 10.3858 64.2795C10.3858 34.3755 34.5258 9.78166 64.2797 9.78166C71.2971 9.78166 78.3145 11.179 85.0513 14.2533C78.3145 24.8734 69.6129 32.4192 59.5078 36.3319ZM44.3502 50.0262C46.5958 49.1878 48.8413 48.9083 51.3676 48.6288L52.2097 48.3493C55.2974 47.7904 59.5078 46.952 64.2797 44.9956C76.6304 39.9651 86.7355 31.3013 94.3143 19.0044C100.209 23.1965 105.261 28.2271 108.63 33.5371C102.174 44.1572 93.4722 51.9825 83.3671 55.8952C78.8759 57.572 75.7883 58.131 72.9813 58.6899C69.8936 58.9694 67.0867 59.8079 64.2797 60.9258C49.4027 66.5153 40.1397 82.7249 36.21 110.114C30.3153 105.921 25.2628 101.45 21.6137 96.4192C24.4207 70.4279 31.9995 54.7773 44.3502 50.0262ZM67.9287 69.5895C70.1743 68.7511 72.1392 68.4716 74.6655 68.1921H75.2269C78.5952 67.6332 82.2443 66.7948 87.2969 65.1179C97.9634 60.6463 107.226 53.6594 113.963 44.1572C116.489 50.5852 117.893 57.572 117.893 64.2795C117.893 94.1834 93.7529 118.218 63.999 118.218C57.5429 118.218 51.3676 117.1 45.473 114.865C48.8413 89.4323 56.4202 74.0611 67.9287 69.5895Z" />
                            </svg>
                            <span className="text-4xl font-extrabold">Marble</span>
                        </CardTitle>
                        <CardDescription className="text-center">Your notes will be synced to your account</CardDescription>
                    </CardHeader>
                    <CardContent className="flex flex-col gap-2 p-0 m-4">
                        {providers.map((provider) => (
                            <OAuthButton key={provider.name} provider={provider} />
                        ))}
                    </CardContent>
                    <Separator className="relative w-3/4 my-6 flex justify-center items-center font-medium text-sm text-slate-400 before:absolute before:content-['or'] before:bg-card before:px-3 before:leading-3" />
                    <EmailDialog />
                </Card>
            </div>
            <nav className="fixed top-0 w-full flex justify-between p-2">
                <Button variant="link" asChild className="p-0">
                    <Link href="/">
                        <ArrowLeft className="mr-1" />
                        Go back
                    </Link>
                </Button>
                <ThemeModeToggle variant="outline" />
            </nav>
        </main>
    );
}
